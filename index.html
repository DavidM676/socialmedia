<!DOCTYPE html>
<html lang="en">

<style>
    .userContainer {
        border: 2px solid #0000ff;
        display:grid; 
        grid-template-columns: auto;
        padding: 2.5;
        background-color: #101010;
    }  

    .indivUser {
        margin: 7px;
        padding: 5px;
        background-color: #323232;
        color: white
    }

    .indivUser:hover {
        background-color: aqua;
    }



</style>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="usersDiv" class="userContainer">

    </div>
</body>

<script>




    function showInfo(event) {
        console.log(event.target);
        let infoDiv = document.createElement('div');
        let photoCountDiv = document.createElement('p');
        let postCountDiv = document.createElement('p');
        let commentCountDiv = document.createElement('p');

        let userId = event.target.getAttribute('userid'); //get User ID

        let albums = getAlbumbyId(userId);
        
        let photosCount = 0;
        for (let i = 0; i<albums.length; i++) {
            photoCount += getPhotosbyId(albums[i].id).length;
        }
        photoCountDiv
        // getUserPhotos(userId);


        infoDiv.appendChild(photoCountDiv);
        infoDiv.appendChild(postCountDiv);
        infoDiv.appendChild(commentCountDiv);


        event.target.appendChild(infoDiv);
    }



    // async function getUserPhotos(userId) {
    //     const response = await fetch("https://jsonplaceholder.typicode.com/albums");
        
    //     let albums = await response.json();

    //     for (let i = 0; i<photos.length; i++) {

    //         console.log(photos[i].id)
    //     }
    //     photos = photos.filter(element => {
    //         return element.id==userId;
    //     });

    //     console.log(photos);
    // }


    async function getUsers() {
        const response = await fetch("https://jsonplaceholder.typicode.com/users");
        const users = await response.json();
        return users;
    }

    async function getAlbums() {
        const response = await fetch("https://jsonplaceholder.typicode.com/albums");
        const albums = await response.json();
        return albums;
    }

    async function getPhotos() {
        const response = await fetch("https://jsonplaceholder.typicode.com/photos");
        const photos = await response.json();
        return albums;
    }


    function getAlbumbyId(userId) {
        let albumLst = [];
        for (let i = 0; i<albums.length; i++) {
            if (albums[i].userId==userId) {
                albumLst.push(albums[i]);
            }
        }
        return albumLst;
    }
   
    function getPhotosbyId(albumId) {
        let photoLst = [];
        for (let i = 0; i<photos.length; i++) {
            if (photos[i].albumId==albumId) {
                photoLst.push(photos[i]);
            }
        }
        return photoLst;
    }
   

   async function setUsers() {
        const grid = document.getElementById("usersDiv");

        //load all the data from the server
        albums = await getAlbums(); 
        photos = await getPhotos();

        const users = await getUsers();
        for (let i = 0; i<users.length; i++) {
            const user = users[i];

            let thisDiv = document.createElement('div');
            thisDiv.addEventListener("mouseover", showInfo);
            thisDiv.setAttribute("userId", user.id); //set user id 


            thisDiv.className = "indivUser";

            let name = document.createElement('p');

            name.innerHTML=user.name;

            thisDiv.appendChild(name);
            grid.appendChild(thisDiv);
            
        }
   }

   setUsers();
   
</script>

</html>